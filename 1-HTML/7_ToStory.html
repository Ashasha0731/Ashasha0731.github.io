<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>情境測驗題-中學生資訊安全網</title>
    <link rel="icon" type="image/png" href="../0-IMAGE/0_Nav/logo-遊戲廳.png?v=1"> <!-- 網站圖標設定 -->
    <style>
        body {
            font-family: "Microsoft JhengHei", sans-serif;
            margin: 0;
        }

        .BG {
            /* 背景圖設定 */
            background-image: url('../0-IMAGE/1_Guide-page/星空背景.gif');
            background-size: auto;
            /* ✅ 保持原始大小 */
            background-repeat: no-repeat;
            /* ✅ 不重複平鋪 */
            background-position: center;
            /* ✅ 圖片置中 */
            background-attachment: fixed;
            /* ✅ 視差效果（可選） */
            background-color: #000;
        }

        /* ===== 導覽列 ===== */
        #header1-container * {
            margin: 0;
            padding: 0;
            background-color: #333;
        }

        /* =================== 返回上一頁 ===================== */
        /* 左上角返回按鈕 */
        .back-btn {
            position: fixed;
            top: 75px;
            left: 20px;
            z-index: 2000;
            background: rgba(0, 0, 0, 0.6);
            color: #fff;
            border: 2px solid white;
            padding: 12px 18px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 12px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(250, 247, 247, 0.978);
            transition: all 0.2s ease;
        }

        .back-btn:hover {
            background: rgba(0, 0, 0, 0.8);
            transform: scale(1.05);
        }

        /* ------------ */
        h1 {
            text-align: center;
            color: #ffffff;
            margin-bottom: 20px;
        }

        .chapter-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 800px;
            margin: auto;
        }

        .chapter-item {
            display: flex;
            align-items: center;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            padding: 10px 15px;
            transition: 0.2s;
            border: 2px solid transparent;
            /* ✅ 預留邊框空間（透明） */
        }


        .chapter-item:hover {
            transform: scale(1.02);
        }

        /* ✅ 被選中的章節外框效果 */
        .chapter-item.selected {
            border: 4px solid #00ec76;
            /* ✅ 綠色框線 */
            transition: 0.2s;
        }

        .chapter-img {
            width: 150px;
            height: 100px;
            border-radius: 10px;
            object-fit: cover;
            margin-right: 15px;
        }

        .chapter-info {
            flex: 1;
        }

        .chapter-title {
            font-weight: bold;
            font-size: 1.2rem;
            color: #1d2630;
        }

        .chapter-desc {
            color: #666;
            font-size: 0.9rem;
            margin-top: 4px;
        }

        .chapter-check {
            width: 20px;
            height: 20px;
            transform: scale(1.4);
            margin-left: 10px;
        }

        .btn-container {
            text-align: center;
            margin-top: 30px;
        }

        .btn-start {
            background: #0b6efd;
            color: white;
            font-size: 1.1rem;
            padding: 10px 25px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: 0.2s;
        }

        .btn-start:hover {
            background: #095cd1;
        }

        /* ====== AI吉祥物- 彈出視窗 ====== */
        /* ====== 彈出視窗內容 ====== */
        #Mrs_XL-1-container {
            position: fixed;
            /* 固定在螢幕頂端 */
            z-index: 10000;
            font-size: 20px;
            box-shadow: 0 3px 12px rgba(255, 255, 255, 0.4);
            /* 懸浮感陰影 */
        }

        /* 視窗預設隱藏 */
        /* 彈窗淡入淡出 */
        .ai-popup-content {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50%;
            height: 90%;
            background: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
            z-index: 2000;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);

            /* 動畫效果 */
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.8);
            transition: opacity 0.4s ease, transform 0.4s ease;
        }

        .ai-popup-content.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        .ai-popup-content iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 10px;
        }

        #close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: #ff4d4d;
            border: none;
            color: white;
            font-size: 18px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
        }

        /* 遮罩淡入淡出 */
        #ai-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;

            /* 動畫效果 */
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s ease, visibility 0.4s ease;
        }

        #ai-popup.show {
            opacity: 1;
            visibility: visible;
        }

        /* ====== 載入中提示框 ====== */
        #loading-overlay {
            position: fixed;
            top: 50%;
            left: 50%;
            width: 150px;
            height: 100px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            font-size: 1em;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 8px;
            z-index: 9999;
            visibility: hidden;
            opacity: 0;
            transform: translate(-50%, -50%);
            transition: opacity 0.4s ease, visibility 0.4s ease;
        }

        /* 顯示狀態 */
        #loading-overlay.show {
            visibility: visible;
            opacity: 1;
        }

        /* 關閉按鈕樣式 */
        #loading-overlay button {
            position: absolute;
            top: 4px;
            right: 6px;
            background: none;
            border: none;
            color: white;
            font-size: 1.2em;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        #loading-overlay button:hover {
            transform: scale(1.2);
        }
    </style>
</head>

<body class="BG">
    <!-- 導覽列 -->
    <header>
        <div id="header1-container"></div>
    </header>
    <!-- 固定元素-吉祥物 + AI對話框 -->
    <div id="Mrs_XL-1-container"></div>
    <!-- 嵌入colabAI -->
    <div id="ai-popup">
        <!-- ✅ 隱藏的彈出視窗(AI對話) -->
        <div class="ai-popup-content" id="aiPopup">
            <iframe src="0.11_colabAI.html" frameborder="0"></iframe>
            <button id="close-btn">✕</button>
        </div>
    </div>
    <!-- 返回按鈕 -->
    <button id="back-btn" class="back-btn" onclick="enterBack()">返回</button>

    <main>
        <h1>情境題列表</h1>
        <!-- js生成測驗列表 -->
        <div class="chapter-list" id="chapterList"></div>
        <!-- 開始測驗 -->
        <div class="btn-container"><button class="btn-start" onclick="startTest()">開始測驗</button></div>
    </main>






    <!-- --------------------------JS------------------------------- -->
    <!-- 載入導覽列 -->
    <script>
        fetch('./0_Nav-1.html')
            .then(response => response.text())
            .then(data => {
                const header = document.getElementById('header1-container');
                header.innerHTML = data;

                // 如果載入的 nav 裡有按鈕需要 JS，這裡可以綁定事件
            })
            .catch(error => console.error('載入 HTML 失敗:', error));
    </script>

    <!-- 載入吉祥物 -->
    <script>
        // 載入吉祥物
        fetch('./0.1_Mrs_XL-1.html')
            .then(res => res.text())
            .then(html => {
                const container = document.getElementById('Mrs_XL-1-container');
                container.innerHTML = html;

                // 執行吉祥物裡的 <script>
                const scripts = container.querySelectorAll('script');
                scripts.forEach(oldScript => {
                    const newScript = document.createElement('script');
                    if (oldScript.src) newScript.src = oldScript.src;
                    else newScript.textContent = oldScript.textContent;
                    document.body.appendChild(newScript);
                });

                // 綁定點擊吉祥物事件
                const mascot = document.getElementById("mascot");
                const aiPopupContainer = document.getElementById("ai-popup");
                const aiPopupContent = document.getElementById("aiPopup");
                const closeBtn = document.getElementById("close-btn");

                if (mascot && aiPopupContainer && aiPopupContent && closeBtn) {
                    mascot.addEventListener("click", () => {
                        aiPopupContainer.classList.add("show");
                        aiPopupContent.classList.add("show");
                    });

                    function closePopup() {
                        // 移除 show class 觸發淡出
                        aiPopupContent.classList.remove("show");
                        aiPopupContainer.classList.remove("show");
                    }

                    closeBtn.addEventListener("click", closePopup);

                    // 點遮罩也關閉
                    aiPopupContainer.addEventListener("click", e => {
                        if (e.target === e.currentTarget) {
                            closePopup();
                        }
                    });
                }
            });
    </script>


    <script>
        // 假設的章節資料 (13章)
        const chapters = [
            {
                title: "第一章",
                subtitle: "系統安全是什麼？",
                desc: "電腦就像你的房間：要有鎖（密碼）、要常打掃（更新）、不要讓陌生人亂開門（權限）。系統安全就是保護你的「數位房間」。(共十題)",
                img: "../0-IMAGE/Chapter_IMG/ch1.png"
            }, {
                title: "第二章",
                subtitle: "APT攻擊與網路攻擊鏈",
                desc: "進階持續性滲透（APT）就像電影裡的間諜：不是一次進來就走，而是悄悄待在裡面、慢慢取得信任與資料。(共十題)",
                img: "../0-IMAGE/Chapter_IMG/ch2.png"
            }, {
                title: "第三章",
                subtitle: "防火牆與封包檢查",
                desc: "防火牆像學校的門禁與值日生，決定誰可以進出；封包檢查則是檢查「信件」內容是否安全。(共十題)",
                img: "../0-IMAGE/Chapter_IMG/ch3.png"
            }, {
                title: "第四章",
                subtitle: "網站會被駭嗎？",
                desc: "簡單的密碼就像用透明膠帶當門鎖，容易被撬開；網站也會有被攻擊的風險，要學會找出弱點並加強門鎖。(共十題)",
                img: "../0-IMAGE/Chapter_IMG/ch4.png"
            }, {
                title: "第五章",
                subtitle: "檔案誰可以看？",
                desc: "存取權限就像寫日記給特定朋友看：寫上「只有媽媽能看」或「朋友可以留言」。權限要設定正確，才不會被不該看的人看到。(共十題)",
                img: "../0-IMAGE/Chapter_IMG/ch5.png"
            }, {
                title: "第六章",
                subtitle: "找出可疑的電腦行為",
                desc: "用 netstat 看電腦的「血管」，可以看到哪些連線在動；異常連線就像陌生人在你房間附近徘徊。(共十題)",
                img: "../0-IMAGE/Chapter_IMG/ch6.png"
            }, {
                title: "第七章",
                subtitle: "誰動了我的檔案？",
                desc: "稽核日誌像監視器錄影，可以回放誰進來過、做過什麼操作，幫助找出有問題的人或時間。(共十題)",
                img: "../0-IMAGE/Chapter_IMG/ch7.png"
            }, {
                title: "第八章",
                subtitle: "漏洞與密碼怎麼管？",
                desc: "漏洞就像沒關緊的窗戶或門縫，會被人鑽空子；密碼管理像是把鑰匙放在哪裡，放錯地方就容易丟失或被偷。(共十題)",
                img: "../0-IMAGE/Chapter_IMG/ch8.png"
            }, {
                title: "第九章",
                subtitle: "密碼怎麼傳？駭客怎麼偷",
                desc: "Hash 像門禁卡的序號：不會直接顯示原本密碼，但能用來比對是否正確；若傳輸不安全，駭客可能截取或冒用。(共十題)",
                img: "../0-IMAGE/Chapter_IMG/ch9.png"
            }, {
                title: "第十章",
                subtitle: "檔案怎麼保護？",
                desc: "chmod、ACL、雲端分享設定就像設定誰能看到你的相簿或誰能編輯文件：設定錯會讓不該看的人看到或改你的東西。(共十題)",
                img: "../0-IMAGE/Chapter_IMG/ch10.png"
            }, {
                title: "第十一章",
                subtitle: "機器學習入門",
                desc: "機器學習就像教一台機器分辨蘋果和香蕉：你給它很多範例，它會慢慢學會自己判類別，變成「數位小幫手」。(共十題)",
                img: "../0-IMAGE/Chapter_IMG/ch11.png"
            },
            {
                title: "第十二章",
                subtitle: "AI 幫忙抓駭客",
                desc: "AI 可以幫資安人員像超級保全機器人一樣檢查大量資料、找出異常，但它也會有誤判，要人來監督。(共十題)",
                img: "../0-IMAGE/Chapter_IMG/ch12.png"
            }, {
                title: "第十三章",
                subtitle: "IDS & IPS 差在哪？",
                desc: "IDS 像監視器會「告訴你發生了什麼」，IPS 則像值勤警衛會「直接制止」不對的行為；兩者常配合使用。(共十題)",
                img: "../0-IMAGE/Chapter_IMG/ch13.png"
            }
        ];

        // 動態生成章節清單
        const chapterList = document.getElementById("chapterList");
        chapters.forEach((c, index) => {
            const item = document.createElement("div");
            item.className = "chapter-item";
            item.innerHTML = `
                <img src="${c.img}" alt="${c.title}" class="chapter-img">
                <div class="chapter-info">
                <div class="chapter-title">${c.title}:  ${c.subtitle}</div>
                <div class="chapter-desc">${c.desc}</div>
                </div>
                <input type="checkbox" class="chapter-check" value="${c.title}" data-subtitle="${c.subtitle}" id="chapter-${index}">
            `;
            chapterList.appendChild(item);

            // ✅ 點擊 checkbox 時切換外框
            const checkbox = item.querySelector(".chapter-check");
            checkbox.addEventListener("change", () => {
                if (checkbox.checked) {
                    item.classList.add("selected");
                } else {
                    item.classList.remove("selected");
                }
            });
        });

        // 點擊「開始測驗」跳轉
        function startTest() {
            // 取得勾選的章節
            const checked = [...document.querySelectorAll(".chapter-check:checked")];
            if (checked.length === 0) {
                alert("請選擇一個章節！");
                return;
            }

            // 如果只取第一個選擇，也可以用 checked[0]
            const title = checked.map(c => c.value).join(",");
            const subtitle = checked.map(c => c.dataset.subtitle).join(",");

            // 編碼參數
            const encodedTitle = encodeURIComponent(title);
            const encodedSubtitle = encodeURIComponent(subtitle);

            // 直接跳轉到 4.3-Chapter_simulation 並帶參數
            window.location.href = `4.3-Chapter_simulation.html?title=${encodedTitle}&subtitle=${encodedSubtitle}`;
        }

        // ✅ 如果你希望勾選就立即跳轉，而不是按「開始測驗」：
        document.querySelectorAll(".chapter-check").forEach(cb => {
            cb.addEventListener("change", () => {
                if (cb.checked) {
                    const title = cb.value;
                    const subtitle = cb.dataset.subtitle;
                    const encodedTitle = encodeURIComponent(title);
                    const encodedSubtitle = encodeURIComponent(subtitle);
                    window.location.href = `4.3-Chapter_simulation.html?title=${encodedTitle}&subtitle=${encodedSubtitle}`;
                }
            });
        });
    </script>
    <!-- 轉跳頁面 -->
    <script>
        // ▶返回按鈕
        function enterBack() {
            const referrer = document.referrer; // 取得上一頁網址
            console.log("上一頁:", referrer);

            // 如果有上一頁且是指定網址之一
            if (referrer.includes("2-Game-home.html")) {
                window.location.href = "2-Game-home.html";
            } else {
                // 沒有上一頁，跳回首頁
                window.location.href = "index.html";
            }
        }
    </script>
</body>

</html>